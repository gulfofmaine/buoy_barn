version: "3.7"

services:
  db-test:
    image: postgis/postgis:15-3.3@sha256:a2fc46b52819d25add4ed93d3da83e106e17ea3ace6883cce3791631c9820bb2
    env_file:
      - ./docker-data/test.env

  cache-test:
    image: redis:7.2.4-alpine@sha256:7635b0bfdd7dd8552b4b31d6541fef07b734614045b45a52fd5cc27c9dada9e2

  web-test:
    build: ./app
    image: gmri/neracoos-buoy-barn
    volumes:
      - ./app:/app:cached
    env_file:
      - ./docker-data/test.env
    links:
      - db-test
      - cache-test
